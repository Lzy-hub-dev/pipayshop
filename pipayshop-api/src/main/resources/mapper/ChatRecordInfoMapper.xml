<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.pipayshopapi.mapper.ChatRecordInfoMapper">


    <select id="getChatRecord" resultType="com.example.pipayshopapi.entity.vo.ChatVO">
        SELECT * FROM (
            SELECT sender_id, message, send_time FROM chat_record_info WHERE sender_id = #{senderId} and receiver_id = #{receiverId} and del_flag = 0
            UNION
            SELECT sender_id, message, send_time FROM chat_record_info WHERE sender_id = #{receiverId} and receiver_id = #{senderId} and del_flag = 0
        ) AS chat
        ORDER BY send_time ASC
    </select>
</mapper>